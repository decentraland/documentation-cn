---
date: 2018-02-10
title: 声音
description: 了解如何向场景添加声音.
categories:
  - development-guide
type: Document
set: development-guide
set_order: 10
---

> Note: We're working on an improved sound controller that will allow for multiple tracks and positional sound. This feature will be unveiled soon.

Sound is a great way to provide feedback to user actions and events, background sounds can also give your scene more context and improve the user's immersion into it.

> 注意：我们正在研究一种改进的声音控制器，将允许多个音轨和位置的声音。此功能即将推出。

声音是向用户动作和事件提供反馈的好方法，背景声音还可以为您的场景提供更多背景信息，并改善用户的沉浸感。

You can either trigger sounds from a specific entity, or from the scene itself.

> Note: Keep in mind that sounds from your scene will be also heard by users that are outside your scene but in hearing range, so be considerate with neighboring scenes when setting volumes and volume curves.

可以从特定实体或场景本身触发声音。

> 注意：请注意，场景外但听觉范围内的用户也会听到场景中的声音，因此在设置音量和 volume curves 音量曲线时应考虑相邻场景。

Supported sound formats vary depending on the browser, but it's safe to use _.mp3_, _.accc_ and _.ogg_.

_.wav_ files are also supported but not generally recommended as they are significantly larger.

支持的声音格式因浏览器而异，但使用 _.mp3_, _.accc_ 和 _.ogg_ 是安全的。
_.wav_ 文件也受支持，但通常不推荐使用，因为文件要大得多。

## Import the sound controller
## Import 声音控制器

To use sounds, you must first import the `SoundController` into your scene:

要使用声音，必须先将 `SoundController` 导入场景：

```ts
import { playSound } from "@decentraland/SoundController"
```

## Play a sound from the scene
## 播放场景中的声音

You can play a sound directly from your scene. Sounds played in this way are heard as sounding from the center of your scene. This is a good way to handle ambience and general notification sounds that don't need to have a specific source.

Note that playing sounds in this way requires calling an [asynchronous function]({{ site.baseurl }}{% post_url /development-guide/2018-02-25-async-functions %}) by using `executeTask()`.

您可以直接从场景中播放声音。以这种方式播放的声音在场景中心发出。这是处理不需要特定来源氛围和一般声音通知的好方法。

请注意，以这种方式播放声音需要使用 `executeTask()` 来调用[异步函数]({{ site.baseurl }}{% post_url /development-guide/2018-02-25-async-functions %})。

```ts
executeTask(async () => {
  try {
    await playSound("mySound", "sounds/wind_blowing.mp3", {
      volume: 100
    })
  } catch {
    log("failed to play sound")
  }
})
```

The `src` property points to the location of the sound file.

`src` 属性指向声音文件的位置。

In the example above, the audio file is located in a `sounds` folder, which is located at root level of the scene project folder.

在上面的示例中，音频文件位于 `sounds` 文件夹中，该文件夹位于场景项目文件夹根目录下。

> Tip: We recommend keeping your sound files separate in a   folder inside your scene.

> 提示：我们建议您将声音文件保存在场景内的 `/sounds` 文件夹中。

#### Loop a sound
#### 循环播放声音

To keep a sound playing in a continuous loop, set the `loop` field to _true_. This is useful for adding background music or other background sounds.

Setting loop to _false_ stops the audio, it doesn't pause it. So when setting loop to _true_ again, the audio sample will start from the beginning.

要使声音连续循环播放，请将 `loop` 字段设置为 _true_。这在添加背景音乐或其他背景声音很有用。

将循环设置为 _false_ 会停止，不是暂停。因此，当再次将循环设置为 _true_ 时，声音将从头开始播放。

```ts
executeTask(async () => {
  try {
    await playSound("mySound","sounds/wind_blowing.mp3", {
      loop: true,
      volume: 100
    })
  } catch {
    log("failed to play sound")
  }
})
```
#### Pause a sound
#### 暂停播放

To pause a sound that was playing, simply use `pauseSound()`, calling the sound by the name you provided in the arguments.

要暂停正在播放的声音，使用 `pauseSound()`，通过参数中提供的名称调用。

```ts
executeTask(async () => {
  try {
    await pauseSound("mySound")
})
```

<!--
Setting playing to false pauses??????
-->
<!--
## Make an entity play a sound

You can add sound to your scene by including a sound component in any entity.

Each entity can only play a single sound file. This limitation can easily be overcome by including multiple invisible entities, each with their own sound file.

The `distanceModel` property of the sound component conditions how the user's distance to the sound's source affects its volume. The model can be _linear_, _exponential_ or _inverse_. When using the linear or exponential model, you can also set the `rolloffFactor` property to set the steepness of the curve.

```ts
```

## Volume curves

You can also change how volume levels relate to distance from the sound source to put more or less emphasis on a sound's location.

```ts
```

## Pool sound objects

A great way to save processing power is to have a series of pooled sound objects and only assign them to entities when needed.

Suppose you have a large amount of balls bouncing around in your scene, and you want to hear a _thump_ sound every time two of them collide. Instead of adding a `sound` component to each ball, each containing a reference to the same audio sample, you can have a couple of instanced sound components ready to be temporarily assigned to any ball that needs them. After the sound is played, the sound components can be unassigned from the entity and wait for the next ball that needs them.

```ts
```
-->
